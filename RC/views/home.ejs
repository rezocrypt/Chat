<link href="//maxcdn.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css"
        integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">

    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.3.1/css/all.css"
        integrity="sha384-mzrmE5qonljUremFsqc01SB46JvROS7bZs3IO2EmfFsd15uHvIt+Y8vEf7N7fWAU" crossorigin="anonymous">

    <title>RezoChat - <%= unescape(uorp["information"]["name"]).substr(1,JSON.stringify(uorp["information"]["name"]).length-2)%> </title>
    <style>
        body {
    background-image: url('http://getwallpapers.com/wallpaper/full/a/5/d/544750.jpg');
    background-size: cover;
    background-repeat: no-repeat;
    margin: 0;
    padding:0;
}
#sendmessage{
    position: fixed;
    bottom: 0;
    width: 100%;
}
#message{
    width: 65%;
    font-size: 1.4em;
    background-color: <%=JSON.stringify(uorp["information"]["bgcolor"]).substr(1, 7) %>40;
    color: rgb(255, 255, 255);
    border: 0px;
    padding: 5px;
    border-radius: 50px;
    padding-left: 3%;
    margin-bottom: 1%;
    margin-right: 1%;
}
#send{
    color: white;
    padding: 5px;
    font-size: 1.4em;
    border-radius: 50px;
    box-shadow: none;
    border: 0px;
    margin: 0;
    background-color: <%=JSON.stringify(uorp["information"]["bgcolor"]).substr(1, 7) %>40;
    width: 10%;
    height: 5%;             
}
#message:focus{
    outline-width: 0;
}

.menu{
    list-style-type: none;
    margin: 0;
    padding: 0;
    overflow: hidden;
    background-color: #182533;
    position: -webkit-sticky; /* Safari */
    position: sticky;
    top: 0;
}
#send:focus{
    outline-width: 0;
    outline: none;
    background-color: <%=JSON.stringify(uorp["information"]["bgcolor"]).substr(1, 7) %>aa;
}
#send:hover{
    outline-width: 0;
    outline: none;
    background-color: <%=JSON.stringify(uorp["information"]["bgcolor"]).substr(1, 7) %>bb;
}

        li {
float: left;
}

li a {
display: block;
color: white;
text-align: center;
padding: 14px 16px;
text-decoration: none;
}

li a:hover {
background-color: #111;
}
.logout:hover {
background-color: #111 ;

}
#home{
    font-size: 2em;
    font-weight: bold;
    margin: 0;
}
.logout{
    color: white;
    background-color: transparent;
    font-size: 2em;
    border: 0;
    height: 100%;

    
}
.logout-list{
    vertical-align: middle;
    margin: auto;
    height: 80%;
    margin-top: 10px;
}
#nav{
    background-color: rgba(100, 100, 100, 0.5) !important;
    margin-bottom: 0.5%;
}
#profile_image{
    border-radius: 50%;
    height: 80px;
    width: 80px;
}
.nav-link:hover{
    background-color: yellow;
    color: black;
}
.menu2{
    list-style-type: none;
}
#fileinput{
    color: aquamarine;
}
li{
    margin-left: 5px;
    margin-right: 5px;
}
#message-file-div{
    margin: auto;
    color: white;
    box-shadow: 0 10px 20px -8px rgba(0, 0, 0, .7);
    font-size: 0.6em;
    margin-bottom: 10px;
    margin-top: 10px;
    width: 200px;
    height: auto;
    padding: 15px;
    background-color: #384856;
    border-radius: 10px;
}

[type="file"] {
/* Style the color of the message that says 'No file chosen' */
  color: transparent;
}
[type="file"]::-webkit-file-upload-button {
  background: #0088cc;
  border-radius: 14px;
    border: 0px;
  color: #fff;
  cursor: pointer;
  font-size : 12px;
  outline: none;
  padding: 10px 25px;
  text-transform: uppercase;
  transition: all 1s ease;
}

[type="file"]::-webkit-file-upload-button:hover {
  background: #fff;
  border: 2px solid #535353;
  color: #000;
}


#message-file-div:hover{
    background-color: #0088cc;
    cursor: pointer;
}
@media only screen and (max-width: 10000px)  {

    #messages-window{
        height: 80%;
    }
}

@media only screen and (max-width: 1320px)  {

#messages-window{
    height: 75%;
}
}

@media only screen and (max-width: 680px)  {

#messages-window{
    height: 70%;
}
}
@media only screen and (max-width: 420px)  {

#messages-window{
    height: 60%;
}
}
@media only screen and (max-width: 350px)  {

#messages-window{
    height: 10%;
}
}

    </style>
</head>

<body>
    
    
    <nav class="navbar navbar-dark bg-dark" id="nav">
        <a class="navbar-brand" href="/home">
            <img id="profile_image" src="<%= unescape(uorp["information"]["profile_photo"]).substr(0,JSON.stringify(uorp["information"]["profile_photo"]).length-2)%>" width="50" height="50" alt="">
        </a>
        <a class="navbar-brand" style="font-size: 2em;" href="/edit"><%= unescape(uorp["information"]["name"]).substr(1,JSON.stringify(uorp["information"]["name"]).length-2)%> <% if (uorp["information"]["creating-date"]!="-"){ %>
            <h6 style="color: white;"><%= uorp["information"]["creating-date"][4] %> <%= uorp["month"] %> <%= uorp["information"]["creating-date"][2] %></h6>
            <% } %></a>
        
        <ul class="menu2">
            <li class="nav-item active">
                <a style="font-size: 1.5em;" class="nav-link" href="/logout">Logout <span class="sr-only">(current)</span></a>
            </li>
            <li class="nav-item active">
                <a style="font-size: 1.5em;" class="nav-link" href="/clear">Clear <span class="sr-only">(current)</span></a>
            </li>
            <li class="nav-item active">
                <a style="font-size: 1.5em;" class="nav-link" href="/delete">Delete <span class="sr-only">(current)</span></a>
            </li>
        </ul>
        </nav>
        
        
        
        
            
            
        <div id="messages-window" style="width: 98%; padding-top: 40px;padding-bottom: 40px; border-radius: 20px;  margin: auto;background-color: <%=JSON.stringify(uorp["information"]["bgcolor"]).substr(1, 7) %>40;overflow-y: scroll; margin-bottom: 10%;">
                <% for(var i=0; i < uorp["messages"].length; i++) { %>
                    <% if(uorp["messages"][i]["type"]=="text"){ %>
                        <div style="width: 60%; font-weight: bold; padding: 10px; font-size: 1.5em; height: auto; background-color: <%= JSON.stringify(uorp["messages"][i]["color"]).substr(1,uorp["messages"][i]["color"].length)%> ;</div>%>;margin:auto; border-radius: 20px; text-align: center; margin-bottom: 1%; word-wrap: break-word;">
                            <span style="color: white; font-size: 0.5em; float: left; margin-left: 2%; margin-top: 2%; margin-right: 2%;"><%= uorp["messages"][i]["date"][1] %>:<%= uorp["messages"][i]["date"][0] %></span>
                            <span style="color: white; width: 200px; "><%= unescape(uorp["messages"][i]["message"]).substr(1,JSON.stringify(uorp["messages"][i]["message"]).length-2)%></span>
                        </div>
                    <% } %>

                    <% if(uorp["messages"][i]["type"]=="file"){ %>
                        <div style="width: 60%; font-weight: bold; padding: 10px; font-size: 1.5em; height: auto; background-color: <%= JSON.stringify(uorp["messages"][i]["color"]).substr(1,uorp["messages"][i]["color"].length)%> ;</div>%>;margin:auto; border-radius: 20px; text-align: center; margin-bottom: 1%; word-wrap: break-word;">
                            <span style="color: white; font-size: 0.5em; float: left; margin-left: 2%; margin-top: 2%; margin-right: 2%;"><%= uorp["messages"][i]["date"][1] %>:<%= uorp["messages"][i]["date"][0] %></span>
                            <span style="color: white; width: 200px; "><%= unescape(uorp["messages"][i]["message"]).substr(1,JSON.stringify(uorp["messages"][i]["message"]).length-2)%></span>
                            <div id="message-file-div" onclick="window.open(`download/<%= uorp["messages"][i]["fileinputname"] %> `,'_blank')" ><%= uorp["messages"][i]["fileinputname"] %></div>
                        </div>
                    <% } %>

                    <% if(uorp["messages"][i]["type"]=="image"){ %>
                        <div style="width: 60%; font-weight: bold; padding: 10px; font-size: 1.5em; height: auto; background-color: <%= JSON.stringify(uorp["messages"][i]["color"]).substr(1,uorp["messages"][i]["color"].length)%> ;</div>%>;margin:auto; border-radius: 20px; text-align: center; margin-bottom: 1%; word-wrap: break-word;">
                            <span style="color: white; font-size: 0.5em; float: left; margin-left: 2%; margin-top: 2%; margin-right: 2%;"><%= uorp["messages"][i]["date"][1] %>:<%= uorp["messages"][i]["date"][0] %></span>
                            <span style="color: white; width: 200px; "><%= unescape(uorp["messages"][i]["message"]).substr(1,JSON.stringify(uorp["messages"][i]["message"]).length-2)%></span>
                            
                            <div id="message-file-div" style="width: 80%;" onclick="window.open(`download/<%= uorp["messages"][i]["fileinputname"] %> `,'_blank')" ><%= uorp["messages"][i]["fileinputname"] %>
                                <img style="width: 100%; margin-top: 10px;" src="<%= uorp["messages"][i]["image-path"] %>" alt="">
                            </div>
                        </div>
                    <% } %>
                    
                    <% } %>
                    <form action="/home" method="POST" id="message-form"  enctype='multipart/form-data'>
            <div id="sendmessage">
            <input type="text" name="message" id="message" placeholder="Message..." required autofocus>
            <input type="file" value="" title="" name="fileinput" accept="*" id="fileinput">
            <input type="submit" id="send" value="Send">
                
        </div>
        </form>
    </div>
    <script src="/socket.io/socket.io.js"></script>
    <script>var objDiv = document.getElementById("messages-window");
        objDiv.scrollTop = objDiv.scrollHeight;</script></script>
    




           
</body>

</html>